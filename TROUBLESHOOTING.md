# Troubleshooting Guide

## Проблема: "Failed to fetch" и milestones не загружаются

### Исправления, которые были сделаны:

1. **Добавлен CORS middleware** в `backend/app/main.py`
   - Теперь фронтенд может обращаться к бэкенду

2. **Улучшена обработка ошибок** в `frontend/src/services/api.ts`
   - Более понятные сообщения об ошибках
   - Проверка подключения к бэкенду

3. **Улучшена загрузка milestones** в `frontend/src/pages/ChatView.tsx`
   - Автоматическая перезагрузка каждые 3 секунды
   - Лучшее логирование

### Что проверить:

1. **Бэкенд запущен?**
   ```bash
   curl http://localhost:8000/
   ```
   Должен вернуть: `{"message":"AI Goal Tracker API"}`

2. **CORS работает?**
   Откройте консоль браузера (F12) и проверьте:
   - Нет ли ошибок CORS
   - Правильно ли идут запросы к API

3. **Milestones API работает?**
   ```bash
   curl "http://localhost:8000/api/milestones/?goal_id=1"
   ```
   Должен вернуть массив milestones (может быть пустым `[]`)

4. **Проверьте консоль браузера:**
   - Откройте DevTools (F12)
   - Вкладка Console
   - Ищите ошибки с "Failed to fetch" или "CORS"
   - Проверьте Network tab - какие запросы идут и какие ошибки

5. **Проверьте логи бэкенда:**
   - В терминале, где запущен uvicorn
   - Должны быть логи о запросах к API
   - Если есть ошибки LLM - они будут там

### Если milestones всё ещё не появляются:

1. Проверьте, что goal_id правильный
2. Проверьте в консоли браузера - что возвращает API
3. Убедитесь, что milestones были созданы (проверьте в базе данных или через API)

### Если AI всё ещё отвечает ошибкой:

1. Проверьте, настроен ли `LLM_API_KEY` в `.env` файле
2. Если нет - добавьте в `backend/.env`:
   ```
   LLM_PROVIDER=groq
   LLM_API_KEY=your_key_here
   ```
3. Перезапустите бэкенд после изменения `.env`

