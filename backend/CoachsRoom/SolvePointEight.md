План решения пункта 8 — Логика напоминаний
1) Источник данных для напоминаний
Определить, откуда берутся шаблоны и параметры:
message_library из профиля тренера
интервалы (частота) из правил уведомлений
дневное окно из профиля пользователя
2) Триггеры отправки
Зафиксировать ситуации, которые запускают напоминания:
просрочен дедлайн
утреннее напоминание
отсутствие активности N дней
успех/опережение
3) Алгоритм выбора шаблона
Определить, как выбираем текст:
случайно из списка
по “сценарию” (например, missed_deadline)
с учётом тренера
4) Ограничение спама
Правила:
минимум между уведомлениями
дневное окно
не больше X в день
5) Жизненный цикл напоминаний
Что происходит дальше:
если пользователь ответил → стоп
если проигнорировал → эскалация (для жёсткого)
если выполнил → успех‑сообщение



SolvePointEight — Логика напоминаний (итог)
Контекст
Нужно определить, как используются шаблоны напоминаний, откуда берутся фразы и как они отличаются для push‑уведомлений и сообщений внутри приложения.
Для MVP используем гибрид: готовые фразы + рандомизация.
AI‑перефразирование перенесено в post‑MVP (см. post-mvp.md).
Формат ключей (MVP)
success_ahead — сделал раньше
success_on_time — сделал вовремя
success_late — сделал позже
missed_deadline — не сделал
missed_deadline_weekly — делает слишком долго

Разделение каналов
Push‑уведомления — коротко + живой CTA (“Открой приложение…”)
In‑app сообщения — содержательные, с действиями (сдвиг графика, пересборка)

Нормальный тренер — фразы (16)
success_ahead (опережение)
Push 1:
“Опережаешь график. Отличный прогресс. Открой приложение — там детали и следующий шаг.”
Push 2:
“Задача сделана раньше срока. Это хороший темп. Загляни в приложение — можно перейти к следующей задаче.”
In‑app 1 (с вычисляемыми значениями):
“Ты опережаешь график на {ahead_day}. Следующий этап: {next_mission}. Можем сдвинуть даты вперёд, чтобы сохранить темп. Сдвинуть график?”
In‑app 2 (страховка):
“Задача {now_mission} выполнена раньше. Следующий этап: {next_mission}. Предлагаю пересчитать дедлайны с учётом опережения.”
success_on_time (в срок)
Push 1:
“Задача выполнена в срок. Хорошо. Открой приложение — там следующий шаг.”
Push 2:
“Срок соблюдён. Идём по графику. Загляни в приложение за деталями.”
In‑app 1 (с вычисляемыми значениями):
“Этап выполнен в срок. Осталось ещё {remaining_count} шагов. Следующий: {next_mission}.”
In‑app 2 (страховка):
“Выполнение в срок зафиксировано. Можем переходить к следующей задаче.”
success_late (сделал позже)
Push 1:
“Задача выполнена с опозданием. Открой приложение — предложу обновить сроки.”
Push 2:
“Срок пропущен, но задача закрыта. Загляни в приложение, чтобы скорректировать график.”
In‑app 1 (с вычисляемыми значениями):
“Задача {now_mission} выполнена с опозданием на {late_day}. Из‑за этого сократилось время на следующий шаг: {next_mission}. Предлагаю сдвинуть даты.”
In‑app 2 (страховка):
“Срок пропущен, но результат получен. Переносим дедлайны или пересобираем план?”
missed_deadline / missed_deadline_weekly (не сделал / слишком долго)
Push 1 (missed_deadline):
“Срок по задаче пропущен. Открой приложение — нужно решить, что делать дальше.”
Push 2 (missed_deadline_weekly):
“Долгая задержка по задаче. Загляни в приложение, чтобы пересобрать график.”
In‑app 1 (missed_deadline):
“Срок по задаче {now_mission} пропущен. Переносим даты или пересобираем план?”
In‑app 2 (missed_deadline_weekly):
“Задача висит слишком долго. Рекомендую пересобрать график или упростить шаги.”
Подсказки для переменных
{ahead_day} — на сколько дней раньше выполнено
{late_day} — на сколько дней позже выполнено
{now_mission} — название текущей задачи/этапа
{next_mission} — название следующего этапа
{remaining_count} — сколько шагов осталось


Выжимка для @backend/CoachsRoom/SolvePointEight.md
(Лайтовый тренер, 2 фразы на событие, без дублей, с {heart})
Лайтовый — PUSH
Опережение
1) “Ты мчишься быстрее поезда! {heart}{sparkles} Загляни в приложение — там всё про твой прогресс!”
2) “Мы летим вперёд! {heart}{clap}{clap} Открой приложение — покажу, как можно ещё ускориться!”
В срок
1) “Мы всё успеваем! {heart}{clap} Открой приложение — пора праздновать!”
2) “Ты справился/справилась вовремя! {heart}{sparkles} Загляни в приложение — посмотрим, что дальше!”
Сделал позже
1) “Ты всё равно сделал/сделала! Это важно! {heart} Открой приложение — посмотрим, как подстроить график.”
2) “Задача закрыта, пусть и позже. Ты молодец/умница! {heart} Загляни в приложение.”
Не сделал
1) “Ничего страшного, мы справимся вместе! {heart} Открой приложение — я помогу.”
2) “Я рядом и помогу тебе вернуться! {heart} Загляни в приложение.”
Делает слишком долго
1) “Мы застряли, но я рядом! {heart} Давай вместе пересоберём график — ты сможешь!”
2) “Давно топчемся, но это поправимо! {heart}{sparkles} Открой приложение — я помогу вернуть темп.”
Лайтовый — IN‑APP
Опережение
1) “Ты опередил/опередила план на {ahead_day}! {heart}{sparkles} Следующий шаг: {next_mission}. Хочешь сдвинуть график вперёд?”
2) “Ты сделал/сделала раньше срока! {heart}{clap}{clap} Готов/готова к следующему этапу: {next_mission}?”
В срок
1) “Мы всё сделали вовремя! {heart}{clap} Следующий шаг: {next_mission}. Пойдём дальше?”
2) “Ты справился/справилась в нужный момент! {heart}{sparkles} Осталось ещё {left_count} этап(а/ов) — продолжаем?”
Сделал позже
1) “Ты сделал/сделала, пусть и позже на {late_day}! {heart} Давай мягко подстроим график, чтобы дальше шлось легче.”
2) “Мы задержались, но шаг закрыт! {heart}{sparkles} Хочешь сдвинуть даты или пересобрать план?”
Не сделал
1) “Ничего страшного. {heart} Возможно, я дала слишком тяжёлый шаг. Перенесём сроки или упростим?”
2) “Мы не успели, и это нормально. {heart} Давай вместе решим, как сделать проще и легче.”
Делает слишком долго
1) “Мы слишком долго стоим, но я рядом! {heart} Давай вместе пересоберём график и вернём темп!”
2) “Мы застряли, но это не беда. {heart}{sparkles} Хочешь мягко упростить шаги или сдвинуть даты?”



Выжимка для SolvePointEight.md
(Жёсткий тренер, 2 фразы на событие)

Жёсткий — PUSH

Опережение
1) “Опережаешь график. Хвалю, но мало. Войди, бери следующее.”
2) “Вырвался/вырвалась вперед. Не расслабляйся. Иди загружай следующий этап.”

В срок
1) “Сделал/сделала вовремя. Как мило. Иди дальше работать.”
2) “Уложился/уложилась. Без сюрпризов. Заходи, получай новую задачу.”

Сделал позже
1) “Ты опоздал/опоздала. На {late_day} дня(ей). Позор. Исправляй.”
2) “Просрочил/просрочила задачу. Раздражение растет. Зайди и объяснись.”

Не сделал
1) “Даже не начал/начала. Ты серьезно? Или просто сдался/сдалась?”
2) “Ноль. Полный ноль. Может, тебе просто удалить приложение и не позориться?”

Делает слишком долго
1) “Ты копошишься с задачей {late_day} дня(ей). Надоело ждать. Ускорься.”
2) “Что там происходит? Тянешь слишком долго. Собирайся. Заходи и отчитывайся.”

Жёсткий — IN-APP

Опережение
1) “Ты сделал/сделала {now_mission} на {ahead_day} дня(ей) раньше. Теперь немедленно сдвигай дедлайн для {next_mission}. Я не позволю тебе простаивать.”
2) “Опережение — это норма. Не зазнавайся. Ты просто сделал/сделала то, что должен/должна. Теперь продолжай в том же темпе, если не хочешь, чтобы я разочаровался.”

В срок
1) “Ты закрыл/закрыла {now_mission} вовремя. Теперь берись за {next_mission} и сделай это хотя бы с намёком на энтузиазм.”
2) “Минимальный удовлетворительный результат. Ты не опоздал/опоздала, но и не впечатлил/впечатлила. Развивай успех, а не топчись на месте.”

Сделал позже
1) “Ты опоздал/опоздала на {late_day} дня(ей) с {now_mission}. Это подвело график. Сейчас же пересобирай план, чтобы нагнать упущенное для {next_mission}.”
2) “Прошляпил/прошляпила срок. Это уже не смешно, а грустно. Ты теряешь хватку. Соберись, или следующий провал будет последним.”

Не сделал
1) “Ты провалил/провалила {now_mission} и уже {late_day} дня(ей) тормозишь всё. Чтобы выкарабкаться, тебе нужно за {remaining_count} дня(ей) сделать {next_mission}. Это твой последний шанс.”
2) “Я смотрю на пустоту там, где должен быть результат. Ты даже не пытаешься. Такое безволие — путь в никуда. Либо ты начинаешь действовать сейчас, либо признаёшь своё поражение.”

Делает слишком долго
1) “Ты возишься с {now_mission} уже {late_day} дня(ей). Это недопустимо. У тебя есть {remaining_count} часа(ов), чтобы закончить и перейти к {next_mission}.”
2) “Твоя скорость отвратительна. Ты тянем слишком долго, и это уже не работа, а пародия на неё. Закончи это немедленно.”