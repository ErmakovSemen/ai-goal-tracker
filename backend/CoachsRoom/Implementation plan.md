План реализации (дополненный, с пояснениями)
Ниже я расширил твой план и дал каждому пункту короткий заголовок + описание. Без сроков.
1) Концепция тренера (поведение vs план)
Определить границу ответственности: тренер управляет стилем общения и рекомендациями, а план задаётся пользователем. Зафиксировать правила конфликтов (например, строгий тренер + лёгкий план).
2) Перечень ключевых фич тренеров
Собрать список возможностей: тон, стоп‑слова, частота напоминаний, варианты пола, ассеты, future‑rig. Решить, какие параметры обязательные на старте, какие отложить.
3) Формат данных тренера (JSON‑контракт)
Сформировать финальную структуру trainer JSON: блоки behavior, prompt_rules, proactive, variants, assets. Решить, где лежат тексты и правила.
4) Структура БД под тренеров
Спроектировать таблицы: trainer_profiles, trainer_variants, trainer_assets. Определить, какие поля в JSON, а какие в колонках.
5) Стратегия ассетов и future‑rig
Определить типы ассетов и метаданные, чтобы можно было заменить PNG на Rig без ломки UI. Например: asset_type, format, meta.
6) Соответствие тренера и цели/пользователя
Решить, где хранится выбор тренера: на уровне User или Goal. Определить логику наследования (дефолт и переопределение).
7) Логика общения тренера в чате
Определить, как config влияет на system‑prompt, и как обеспечивается устойчивость стиля (stop_words + правила + ретраи).
8) Логика напоминаний от тренера
Определить, как proactive.message_library используется: выбор шаблонов, периодичность, условия отправки.
9) Подготовка JSON‑примеров (starter set)
Создать примерные JSON‑файлы для gentle, normal, strict. Это будет эталон, по которому добавляются новые тренеры.
10) Наполнение БД начальными записями
Перенести тренеров в БД (либо загрузка из JSON), чтобы они стали доступными без ручных вставок.
11) Заглушки ассетов (2 пола)
Подготовить простые PNG‑изображения (серые профили), раздельно для male/female.
12) UI: выбор тренера и пола
Спроектировать виджет выбора тренера и вариант пола. Продумать UX: предпросмотр, описание, подтверждение.
13) Интеграция выбора в создание цели
Добавить шаг выбора тренера при создании цели или в настройках профиля.
14) Связь тренера и задач/целей
Определить, как тренер влияет на действия: какие промпты, какие теги сохранять, как это отражается в логике задач.
15) Интеграция в промпт генерации плана
Из параметров тренера + пожеланий пользователя собрать корректный system‑prompt для LLM.
16) Интеграция в проактивные уведомления
Использовать trainer.proactive.message_library и min_interval в механике напоминаний.
17) Валидация стиля (защита от “ломки характера”)
Добавить проверку на запрещённые слова/тон. При нарушении — повтор запроса модели.
18) Документация и гайд для добавления новых тренеров
Кратко описать, как добавлять нового тренера через JSON или БД, чтобы команда не ошибалась.
19) Дополнительные фичи
Собрать идеи: тренер‑наставник по навыкам, прогресс‑отчёты, голосовые сообщения (в будущем), кастомные стили.
План реализации (дополненный, с пояснениями)
Ниже я расширил твой план и дал каждому пункту короткий заголовок + описание. Без сроков.
1) Концепция тренера (поведение vs план)
Определить границу ответственности: тренер управляет стилем общения и рекомендациями, а план задаётся пользователем. Зафиксировать правила конфликтов (например, строгий тренер + лёгкий план).
2) Перечень ключевых фич тренеров
Собрать список возможностей: тон, стоп‑слова, частота напоминаний, варианты пола, ассеты, future‑rig. Решить, какие параметры обязательные на старте, какие отложить.
3) Формат данных тренера (JSON‑контракт)
Сформировать финальную структуру trainer JSON: блоки behavior, prompt_rules, proactive, variants, assets. Решить, где лежат тексты и правила.
4) Структура БД под тренеров
Спроектировать таблицы: trainer_profiles, trainer_variants, trainer_assets. Определить, какие поля в JSON, а какие в колонках.
5) Стратегия ассетов и future‑rig
Определить типы ассетов и метаданные, чтобы можно было заменить PNG на Rig без ломки UI. Например: asset_type, format, meta.
6) Соответствие тренера и цели/пользователя
Решить, где хранится выбор тренера: на уровне User или Goal. Определить логику наследования (дефолт и переопределение).
7) Логика общения тренера в чате
Определить, как config влияет на system‑prompt, и как обеспечивается устойчивость стиля (stop_words + правила + ретраи).
8) Логика напоминаний от тренера
Определить, как proactive.message_library используется: выбор шаблонов, периодичность, условия отправки.
9) Подготовка JSON‑примеров (starter set)
Создать примерные JSON‑файлы для gentle, normal, strict. Это будет эталон, по которому добавляются новые тренеры.
10) Наполнение БД начальными записями
Перенести тренеров в БД (либо загрузка из JSON), чтобы они стали доступными без ручных вставок.
11) Заглушки ассетов (2 пола)
Подготовить простые PNG‑изображения (серые профили), раздельно для male/female.
12) UI: выбор тренера и пола
Спроектировать виджет выбора тренера и вариант пола. Продумать UX: предпросмотр, описание, подтверждение.
13) Интеграция выбора в создание цели
Добавить шаг выбора тренера при создании цели или в настройках профиля.
14) Связь тренера и задач/целей
Определить, как тренер влияет на действия: какие промпты, какие теги сохранять, как это отражается в логике задач.
15) Интеграция в промпт генерации плана
Из параметров тренера + пожеланий пользователя собрать корректный system‑prompt для LLM.
16) Интеграция в проактивные уведомления
Использовать trainer.proactive.message_library и min_interval в механике напоминаний.
17) Валидация стиля (защита от “ломки характера”)
Добавить проверку на запрещённые слова/тон. При нарушении — повтор запроса модели.
18) Документация и гайд для добавления новых тренеров
Кратко описать, как добавлять нового тренера через JSON или БД, чтобы команда не ошибалась.
19) Дополнительные фичи
Собрать идеи: тренер‑наставник по навыкам, прогресс‑отчёты, голосовые сообщения (в будущем), кастомные стили.